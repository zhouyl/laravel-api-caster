# Laravel API Caster v2.0.0 å‘å¸ƒæ€»ç»“

## ğŸ‰ å‘å¸ƒæˆåŠŸï¼

**ç‰ˆæœ¬**: v2.0.0  
**å‘å¸ƒæ—¥æœŸ**: 2024-10-11  
**Git æ ‡ç­¾**: [v2.0.0](https://github.com/zhouyl/laravel-api-caster/releases/tag/v2.0.0)  
**çŠ¶æ€**: âœ… å·²æˆåŠŸæ¨é€åˆ°è¿œç¨‹ä»“åº“

## ğŸš€ ä¸»è¦æˆå°±

### âœ… 1. Caster ç±»å®Œå–„
- **100% æ–¹æ³•æ–‡æ¡£è¦†ç›–**: æ‰€æœ‰ public å’Œ protected æ–¹æ³•éƒ½æœ‰è¯¦ç»†çš„ PHPDoc æ³¨é‡Š
- **å®Œæ•´ç±»å‹çº¦æŸ**: ä¸¥æ ¼çš„å‚æ•°å’Œè¿”å›ç±»å‹å£°æ˜
- **ä½¿ç”¨ç¤ºä¾‹**: ä¸ºå¤æ‚æ–¹æ³•æä¾›äº†å®ç”¨çš„ä»£ç ç¤ºä¾‹
- **å¼‚å¸¸æ–‡æ¡£**: è¯¦ç»†è®°å½•äº†å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹

### âœ… 2. Response::timestamp æ–¹æ³•å®Œå–„
- **æ–¹æ³•å¢å¼º**: æ”¹è¿›äº† PHPDoc æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹
- **å…¨é¢æµ‹è¯•**: æ–°å¢ 5 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–æ‰€æœ‰ä½¿ç”¨åœºæ™¯ï¼š
  - æ•°å­—æ—¶é—´æˆ³è½¬æ¢
  - å­—ç¬¦ä¸²æ—¥æœŸè½¬æ¢
  - DateTimeInterface å¯¹è±¡å¤„ç†
  - null å€¼å¤„ç†
  - æ— æ•ˆå€¼å¤„ç†

### âœ… 3. ä¸­æ–‡æ–‡æ¡£å®Œæ•´
- **README_zh.md**: å®Œæ•´çš„ä¸­æ–‡ä½¿ç”¨æŒ‡å—
  - è¯¦ç»†çš„åŠŸèƒ½ä»‹ç»
  - ä¸°å¯Œçš„ä»£ç ç¤ºä¾‹
  - å®Œæ•´çš„ API å‚è€ƒ
  - å®‰è£…å’Œé…ç½®è¯´æ˜
- **CHANGELOG_zh.md**: ä¸­æ–‡ç‰ˆæœ¬æ›´æ–°æ—¥å¿—
  - è¯¦ç»†çš„ç‰ˆæœ¬å†å²
  - è¿ç§»æŒ‡å—
  - è´¡çŒ®æŒ‡å—

### âœ… 4. ä»£ç è´¨é‡ä¼˜åŒ–
- **PHPStan Level 6**: é›¶é”™è¯¯ï¼Œä¸¥æ ¼è§„åˆ™åˆè§„
- **ä»£ç é£æ ¼**: PHP-CS-Fixer å®Œå…¨åˆè§„
- **ç±»å‹å®‰å…¨**: æ”¹è¿›çš„ null æ£€æŸ¥å’Œç±»å‹å£°æ˜
- **ç°ä»£åŒ–**: ä½¿ç”¨ PHP 8.3+ ç‰¹æ€§

### âœ… 5. å‘å¸ƒæµç¨‹å®Œæˆ
- **Git æäº¤**: æ‰€æœ‰æ›´æ”¹å·²æäº¤
- **ç‰ˆæœ¬æ ‡ç­¾**: v2.0.0 æ ‡ç­¾å·²åˆ›å»º
- **è¿œç¨‹æ¨é€**: ä»£ç å’Œæ ‡ç­¾å·²æ¨é€åˆ° GitHub
- **å‘å¸ƒå°±ç»ª**: å¯åœ¨ Packagist ä¸Šä½¿ç”¨

## ğŸ“Š è´¨é‡æŒ‡æ ‡

### æµ‹è¯•è¦†ç›–ç‡
- **æ€»æµ‹è¯•æ•°**: 48 ä¸ªæµ‹è¯•
- **æ–­è¨€æ•°**: 414 ä¸ªæ–­è¨€
- **ä»£ç è¦†ç›–ç‡**: 88.17%
- **æµ‹è¯•çŠ¶æ€**: âœ… å…¨éƒ¨é€šè¿‡

### ä»£ç è´¨é‡
- **PHPStan**: Level 6, 0 é”™è¯¯
- **PHP-CS-Fixer**: 0 é£æ ¼é—®é¢˜
- **æ–‡æ¡£è¦†ç›–**: 100% å…¬å…±æ–¹æ³•æœ‰ PHPDoc
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ç±»å‹å£°æ˜

### æ–‡ä»¶ç»Ÿè®¡
- **æºä»£ç æ–‡ä»¶**: 5 ä¸ªæ ¸å¿ƒç±»
- **æµ‹è¯•æ–‡ä»¶**: 8 ä¸ªæµ‹è¯•ç±»
- **æ–‡æ¡£æ–‡ä»¶**: 4 ä¸ªæ–‡æ¡£æ–‡ä»¶ï¼ˆè‹±æ–‡ + ä¸­æ–‡ï¼‰
- **é…ç½®æ–‡ä»¶**: å®Œæ•´çš„å¼€å‘ç¯å¢ƒé…ç½®

## ğŸ”§ æŠ€æœ¯æ”¹è¿›

### ç±»å‹ç³»ç»Ÿå¢å¼º
```php
// æ”¹è¿›å‰
protected function getCastType($cast)

// æ”¹è¿›å
protected function getCastType(string $cast): string
```

### æ–‡æ¡£è´¨é‡æå‡
```php
/**
 * Cast data according to the specified cast type.
 * 
 * Converts the given value to the appropriate type based on the cast definition.
 * Supports built-in types (int, string, bool, etc.), custom casters, and enums.
 *
 * @param string $cast The cast type (e.g., 'int', 'datetime', 'decimal:2', MyEnum::class)
 * @param mixed $value The value to cast
 *
 * @return mixed The casted value
 * 
 * @throws \InvalidArgumentException When cast type is invalid
 * @throws \Illuminate\Support\Exceptions\MathException When decimal casting fails
 * 
 * @example
 * $caster->cast('int', '123'); // returns 123
 * $caster->cast('datetime', '2023-01-01'); // returns Carbon instance
 * $caster->cast('decimal:2', '123.456'); // returns '123.46'
 */
public function cast(string $cast, mixed $value): mixed
```

### æµ‹è¯•è¦†ç›–å¢å¼º
```php
// æ–°å¢çš„ timestamp æµ‹è¯•
public function testTimestampWithNumericValue(): void
public function testTimestampWithStringValue(): void
public function testTimestampWithDateTimeInterface(): void
public function testTimestampWithNullValue(): void
public function testTimestampWithInvalidValue(): void
```

## ğŸŒ å›½é™…åŒ–æ”¯æŒ

### åŒè¯­æ–‡æ¡£
- **è‹±æ–‡**: README.md, CHANGELOG.md
- **ä¸­æ–‡**: README_zh.md, CHANGELOG_zh.md
- **ä¸€è‡´æ€§**: ä¸¤ç§è¯­è¨€ç‰ˆæœ¬å†…å®¹å®Œå…¨åŒæ­¥

### æœ¬åœ°åŒ–ç‰¹è‰²
- **ä¸­æ–‡ç¤ºä¾‹**: é€‚åˆä¸­æ–‡å¼€å‘è€…çš„ä»£ç ç¤ºä¾‹
- **æ–‡åŒ–é€‚åº”**: ç¬¦åˆä¸­æ–‡æŠ€æœ¯æ–‡æ¡£ä¹ æƒ¯
- **å®Œæ•´ç¿»è¯‘**: æ‰€æœ‰æŠ€æœ¯æœ¯è¯­éƒ½æœ‰å‡†ç¡®ç¿»è¯‘

## ğŸ“¦ å‘å¸ƒä¿¡æ¯

### ç‰ˆæœ¬å…¼å®¹æ€§
- **PHP**: 8.3+
- **Laravel**: 10.x, 11.x, 12.x
- **ä¾èµ–**: æœ€æ–°ç¨³å®šç‰ˆæœ¬

### å®‰è£…æ–¹å¼
```bash
composer require mellivora/laravel-api-caster:^2.0
```

### å‡çº§æŒ‡å—
ä» v1.x å‡çº§åˆ° v2.0:
1. å‡çº§ PHP åˆ° 8.3+
2. è¿è¡Œ `composer update mellivora/laravel-api-caster`
3. æ£€æŸ¥ç±»å‹å£°æ˜å…¼å®¹æ€§
4. è¿è¡Œæµ‹è¯•ç¡®ä¿åŠŸèƒ½æ­£å¸¸

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### çŸ­æœŸç›®æ ‡
- [ ] ç›‘æ§ç¤¾åŒºåé¦ˆ
- [ ] ä¿®å¤å¯èƒ½çš„é—®é¢˜
- [ ] ä¼˜åŒ–æ€§èƒ½
- [ ] å¢åŠ æ›´å¤šç¤ºä¾‹

### é•¿æœŸè§„åˆ’
- [ ] æ·»åŠ æ›´å¤šè½¬æ¢å™¨ç±»å‹
- [ ] æ”¹è¿› IDE æ”¯æŒ
- [ ] æ‰©å±•æ–‡æ¡£
- [ ] ç¤¾åŒºè´¡çŒ®æŒ‡å—

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

**Laravel API Caster v2.0.0 ç°å·²æ­£å¼å‘å¸ƒï¼** ğŸ‰

---

**é¡¹ç›®åœ°å€**: https://github.com/zhouyl/laravel-api-caster  
**Packagist**: https://packagist.org/packages/mellivora/laravel-api-caster  
**æ–‡æ¡£**: æŸ¥çœ‹ README.md å’Œ README_zh.md
