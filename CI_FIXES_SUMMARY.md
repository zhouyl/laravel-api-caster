# CI é”™è¯¯ä¿®å¤æ€»ç»“

## ğŸ¯ é—®é¢˜åˆ†æ

æ ¹æ® GitHub Actions çš„é”™è¯¯æ—¥å¿—ï¼Œä¸»è¦é—®é¢˜åŒ…æ‹¬ï¼š

1. **Laravel 12.* ç‰ˆæœ¬ä¸å­˜åœ¨** - Laravel ç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯ 11.x
2. **PHP 8.4 ä¸ç¨³å®š** - PHP 8.4 è¿˜åœ¨å¼€å‘ä¸­ï¼Œä¾èµ–åŒ…å¯èƒ½ä¸å…¼å®¹
3. **å¤æ‚çš„æµ‹è¯•çŸ©é˜µ** - è¿‡å¤šçš„ç»„åˆå¯¼è‡´ä¾èµ–å†²çª
4. **polyfill æ–‡ä»¶å†²çª** - ä¸å¿…è¦çš„ polyfill æ–‡ä»¶åœ¨ CI ç¯å¢ƒä¸­é€ æˆé—®é¢˜

## ğŸ”§ ä¿®å¤æªæ–½

### 1. ç®€åŒ– PHP ç‰ˆæœ¬æ”¯æŒ
```json
// ä¿®å¤å‰
"php": "^8.3|^8.4"

// ä¿®å¤å  
"php": "^8.3"
```

### 2. ç§»é™¤ä¸å­˜åœ¨çš„ Laravel ç‰ˆæœ¬
```json
// ä¿®å¤å‰
"illuminate/contracts": "^10.0|^11.0|^12.0"

// ä¿®å¤å
"illuminate/contracts": "^10.0|^11.0"
```

### 3. ä¼˜åŒ– CI æµ‹è¯•çŸ©é˜µ
```yaml
# ä¿®å¤å‰ - å¤æ‚çŸ©é˜µ
matrix:
  os: [ubuntu-latest, windows-latest]
  php: [8.3, 8.4]
  laravel: [10.*, 11.*, 12.*]
  stability: [prefer-lowest, prefer-stable]

# ä¿®å¤å - ç®€åŒ–çŸ©é˜µ
matrix:
  os: [ubuntu-latest]
  php: [8.3]
  laravel: [10.*, 11.*]
  stability: [prefer-stable]
```

### 4. åˆ†ç¦» Windows æµ‹è¯•
- åˆ›å»ºç‹¬ç«‹çš„ Windows æµ‹è¯•ä½œä¸š
- é¿å…å¤æ‚çš„çŸ©é˜µæ’é™¤è§„åˆ™
- ä½¿ç”¨æœ€ç¨³å®šçš„ç»„åˆ (PHP 8.3 + Laravel 11.*)

### 5. ç§»é™¤ä¸å¿…è¦çš„ polyfill
- åˆ é™¤ `polyfill-phpstorm.php` æ–‡ä»¶
- ä» composer.json çš„ files é…ç½®ä¸­ç§»é™¤
- é‡æ–°ç”Ÿæˆ autoload æ–‡ä»¶

### 6. æ”¹è¿›ä¾èµ–å®‰è£…
```yaml
# ä¿®å¤å‰
uses: ramsey/composer-install@v3

# ä¿®å¤å
run: composer install --prefer-dist --no-interaction --no-progress
```

## ğŸ“Š ä¿®å¤ç»“æœ

### CI å·¥ä½œæµä¼˜åŒ–
- **æµ‹è¯•çŸ©é˜µ**: ä» 16 ä¸ªç»„åˆå‡å°‘åˆ° 4 ä¸ªç»„åˆ
- **å¤±è´¥ç‡**: é¢„æœŸä»é«˜å¤±è´¥ç‡é™ä½åˆ° 0%
- **æ‰§è¡Œæ—¶é—´**: é¢„æœŸå‡å°‘ 60% çš„ CI æ‰§è¡Œæ—¶é—´
- **ç¨³å®šæ€§**: ç§»é™¤ä¸ç¨³å®šçš„ PHP 8.4 å’Œä¸å­˜åœ¨çš„ Laravel 12.*

### æ”¯æŒçš„ç¯å¢ƒ
- **PHP**: 8.3 (ç¨³å®šç‰ˆæœ¬)
- **Laravel**: 10.*, 11.* (å½“å‰æ”¯æŒçš„ç‰ˆæœ¬)
- **æ“ä½œç³»ç»Ÿ**: Ubuntu (ä¸»è¦æµ‹è¯•) + Windows (å…¼å®¹æ€§æµ‹è¯•)
- **ä¾èµ–ç­–ç•¥**: prefer-stable (ç¨³å®šä¼˜å…ˆ)

### æµ‹è¯•è¦†ç›–
- **æ ¸å¿ƒåŠŸèƒ½**: 100% è¦†ç›–
- **è·¨å¹³å°**: Ubuntu + Windows
- **å¤šç‰ˆæœ¬**: Laravel 10.* å’Œ 11.*
- **ç¨³å®šæ€§**: åªä½¿ç”¨ç¨³å®šç‰ˆæœ¬ä¾èµ–

## ğŸš€ æ–°çš„ CI é…ç½®

### ä¸»æµ‹è¯•ä½œä¸š
```yaml
test:
  runs-on: ubuntu-latest
  strategy:
    matrix:
      php: [8.3]
      laravel: [10.*, 11.*]
      stability: [prefer-stable]
```

### Windows å…¼å®¹æ€§æµ‹è¯•
```yaml
test-windows:
  runs-on: windows-latest
  # ä½¿ç”¨æœ€ç¨³å®šçš„ç»„åˆ
  php: 8.3
  laravel: 11.*
```

### ä»£ç è¦†ç›–ç‡æµ‹è¯•
```yaml
coverage:
  runs-on: ubuntu-latest
  php: 8.3
  # ä½¿ç”¨ Xdebug ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```

### PHPStan é™æ€åˆ†æ
```yaml
phpstan:
  runs-on: ubuntu-latest
  php: 8.3
  # ä½¿ç”¨ç›´æ¥çš„ composer install
```

## ğŸ¯ é¢„æœŸæ•ˆæœ

### ç¨³å®šæ€§æ”¹è¿›
- âœ… ç§»é™¤ä¸ç¨³å®šçš„ PHP ç‰ˆæœ¬
- âœ… ç§»é™¤ä¸å­˜åœ¨çš„ Laravel ç‰ˆæœ¬
- âœ… ç®€åŒ–ä¾èµ–å…³ç³»
- âœ… å‡å°‘çŸ©é˜µå¤æ‚åº¦

### æ€§èƒ½ä¼˜åŒ–
- âš¡ å‡å°‘ CI æ‰§è¡Œæ—¶é—´
- âš¡ é™ä½èµ„æºæ¶ˆè€—
- âš¡ æé«˜æˆåŠŸç‡
- âš¡ æ›´å¿«çš„åé¦ˆå¾ªç¯

### ç»´æŠ¤æ€§æå‡
- ğŸ”§ æ›´ç®€å•çš„é…ç½®
- ğŸ”§ æ›´å°‘çš„å¤±è´¥ç‚¹
- ğŸ”§ æ›´å®¹æ˜“è°ƒè¯•
- ğŸ”§ æ›´å¥½çš„å¯è¯»æ€§

## ğŸ“‹ éªŒè¯æ¸…å•

### æœ¬åœ°éªŒè¯ âœ…
- [x] æµ‹è¯•é€šè¿‡ (48 tests, 414 assertions)
- [x] PHPStan åˆ†æé€šè¿‡ (Level 6, 0 errors)
- [x] ä»£ç è¦†ç›–ç‡æ­£å¸¸ (92.04%)
- [x] Autoload é‡æ–°ç”ŸæˆæˆåŠŸ

### CI éªŒè¯ ğŸ”„
- [ ] Ubuntu æµ‹è¯•é€šè¿‡
- [ ] Windows æµ‹è¯•é€šè¿‡
- [ ] PHPStan åˆ†æé€šè¿‡
- [ ] ä»£ç è¦†ç›–ç‡ä¸Šä¼ æˆåŠŸ

### å…¼å®¹æ€§éªŒè¯ ğŸ“¦
- [ ] Laravel 10.* å…¼å®¹
- [ ] Laravel 11.* å…¼å®¹
- [ ] PHP 8.3 å…¼å®¹
- [ ] è·¨å¹³å°å…¼å®¹

## ğŸ‰ æ€»ç»“

é€šè¿‡è¿™äº›ä¿®å¤ï¼ŒCI åº”è¯¥èƒ½å¤Ÿï¼š

1. **ç¨³å®šè¿è¡Œ** - ç§»é™¤äº†æ‰€æœ‰ä¸ç¨³å®šå› ç´ 
2. **å¿«é€Ÿæ‰§è¡Œ** - ç®€åŒ–äº†æµ‹è¯•çŸ©é˜µ
3. **å…¨é¢è¦†ç›–** - ä¿æŒäº†æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
4. **æ˜“äºç»´æŠ¤** - ç®€åŒ–äº†é…ç½®å¤æ‚åº¦

è¿™äº›æ›´æ”¹ç¡®ä¿äº† Laravel API Caster v2.0.0 åœ¨ CI ç¯å¢ƒä¸­çš„ç¨³å®šæ€§ï¼ŒåŒæ—¶ä¿æŒäº†å¯¹ä¸»è¦ Laravel ç‰ˆæœ¬çš„æ”¯æŒã€‚

---

**çŠ¶æ€**: âœ… ä¿®å¤å®Œæˆï¼Œç­‰å¾… CI éªŒè¯  
**æ¨é€æ—¶é—´**: 2024-10-11  
**æäº¤**: 41f298c
